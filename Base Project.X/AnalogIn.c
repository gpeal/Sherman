#include "AnalogIn.h"
#include <plib.h>

void setupAnalogIn(int port0, int port1, int port2, int port3, int port4, int port5, int port6, int port7, int port8, int port9, int port10, int port11, int port12, int port13, int port14, int port15)
{
    #define PARAM1  ADC_MODULE_ON | ADC_FORMAT_INTG | ADC_CLK_AUTO | ADC_AUTO_SAMPLING_ON
    #define PARAM2  ADC_VREF_AVDD_AVSS | ADC_OFFSET_CAL_DISABLE | ADC_SCAN_ON | ADC_SAMPLES_PER_INT_1 | ADC_ALT_BUF_OFF | ADC_ALT_INPUT_OFF
    #define PARAM3  ADC_CONV_CLK_INTERNAL_RC | ADC_SAMPLE_TIME_15

    //#define PARAM4  (port0) | (port1 << 1) | (port2 << 2) | (port3 << 3) | (port4 << 4) | (port5 << 5) | (port6 << 6) | (port7 << 7) | (port8 << 8) | (port9 << 9) | (port10 << 10) | (port11 << 11) | (port12 << 12) | (port13 << 13) | (port14 << 14) | (port15 << 15)
    //#define PARAM5  ~(PARAM4)
    #define PARAM4	ENABLE_AN5_ANA
    #define PARAM5 SKIP_SCAN_AN1 | SKIP_SCAN_AN2 | SKIP_SCAN_AN3 | SKIP_SCAN_AN4 | SKIP_SCAN_AN0 | SKIP_SCAN_AN6 | SKIP_SCAN_AN7 | SKIP_SCAN_AN8 | SKIP_SCAN_AN9 | SKIP_SCAN_AN10 | SKIP_SCAN_AN11 | SKIP_SCAN_AN12 | SKIP_SCAN_AN13 | SKIP_SCAN_AN14 | SKIP_SCAN_AN15

    SetChanADC10( ADC_CH0_NEG_SAMPLEA_NVREF);
    OpenADC10( PARAM1, PARAM2, PARAM3, PARAM4, PARAM5 );

    EnableADC10();

}

int readAnalogIn(int portId)
{
    return ReadADC10(portId);
}
